/**
 * Combined ROM Table Styles
 * Streamlined table for AROM, PROM, and RIMs
 */

/* Use higher specificity to override generic .table styles */
table.combined-rom-table {
  width: 100%;
  border-collapse: separate !important;
  border-spacing: 0;
  background: var(--surface);
  border: 4px solid var(--neutral-500);
  border-radius: 8px !important;
  overflow: visible !important; /* Allow dropdowns to extend outside table */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Dark theme table shadow */
:root[data-theme='dark'] .combined-rom-table {
  border: 3px solid var(--color-border-strong);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.combined-rom-thead {
  background: var(--surface-table-head);
  color: var(--table-head-text);
  position: sticky;
  top: 0;
  z-index: 10;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

/* Dark theme header shadow */
:root[data-theme='dark'] .combined-rom-thead {
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.4);
}

.combined-rom-th {
  padding: 0.6rem 0.5rem;
  text-align: center;
  font-weight: 600;
  background: var(--neutral-600);
  color: var(--text);
  border: none;
  border-bottom: 2px solid var(--color-border-strong);
}

/* Dark theme column headers - lighter than data cells */
:root[data-theme='dark'] .combined-rom-th {
  background: var(--neutral-650);
  color: var(--white);
  border-bottom: 1px solid var(--neutral-700);
}

.combined-rom-th.motion-col {
  text-align: center;
  vertical-align: middle;
  width: 15%;
  background: #009a44; /* UND Green */
  color: var(--white);
  font-weight: 600;
  font-size: 1.125rem; /* 18px, up from base 16px */
  border-right: 3px solid var(--color-border-strong);
  border-bottom: 2px solid var(--color-border-strong);
}

/* Top-left corner rounding */
.combined-rom-thead tr:first-child .combined-rom-th.motion-col {
  border-top-left-radius: 4px !important;
}

/* Top-right corner rounding */
.combined-rom-thead tr:first-child .combined-rom-th:last-child {
  border-top-right-radius: 4px !important;
}

/* Dark theme motion column header - keep UND Green in both themes */
:root[data-theme='dark'] .combined-rom-th.motion-col {
  background: #009a44; /* UND Green */
  color: var(--white);
}

.combined-rom-th.left-group,
.combined-rom-th.right-group {
  background: var(--neutral-600);
  font-weight: 600;
  font-size: 1.05rem;
  border-bottom: 2px solid var(--color-border-strong);
}

/* Vertical divider before Right group - matches sub-header pattern */
.combined-rom-th.right-group {
  border-left: 2px solid var(--color-border-strong);
}

/* Dark theme group headers - lightest for prominence */
:root[data-theme='dark'] .combined-rom-th.left-group,
:root[data-theme='dark'] .combined-rom-th.right-group {
  background: var(--neutral-600);
  color: var(--white);
  border-bottom: 2px solid var(--neutral-700);
}

/* normal-col removed when Normal column was removed */

.combined-rom-th.sub-header {
  font-size: 0.9rem;
  font-weight: 500;
  padding: 0.5rem 0.25rem;
}

/* Vertical divider before Right group sub-headers */
.combined-rom-th.sub-header.divider-left {
  border-left: 2px solid var(--color-border-strong);
}

/* Center group headers explicitly */
.combined-rom-thead .left-group,
.combined-rom-thead .right-group {
  text-align: center;
}

/* Center RIM, right-align AROM and PROM */
.combined-rom-thead .sub-header:nth-child(3),
.combined-rom-thead .sub-header:nth-child(6) {
  text-align: center; /* RIM columns */
}

.combined-rom-thead .sub-header:nth-child(1),
.combined-rom-thead .sub-header:nth-child(2),
.combined-rom-thead .sub-header:nth-child(4),
.combined-rom-thead .sub-header:nth-child(5) {
  text-align: right; /* AROM and PROM columns */
  padding-right: 0.75rem;
}

/* Row hover states - UND green tint */
.combined-rom-tbody .combined-rom-row:hover .combined-rom-td {
  background: rgba(0, 154, 68, 0.08) !important; /* 8% UND green tint */
}

/* Dark theme row hover - darker green tint */
:root[data-theme='dark'] .combined-rom-tbody .combined-rom-row:hover .combined-rom-td {
  background: rgba(0, 154, 68, 0.25) !important; /* 25% UND green overlay */
}

/* Motion cell hover - darker UND green to lead the row */
.combined-rom-tbody .combined-rom-row:hover .motion-cell {
  background: rgba(0, 154, 68, 0.15) !important; /* 15% UND green tint */
}

/* Dark theme motion cell hover - even darker green */
:root[data-theme='dark'] .combined-rom-tbody .combined-rom-row:hover .motion-cell {
  background: rgba(0, 154, 68, 0.35) !important; /* 35% UND green overlay */
}

/* Dark theme motion cell hover - brighten slightly */
:root[data-theme='dark'] .combined-rom-tbody .combined-rom-row:hover .motion-cell {
  background: var(--neutral-800);
  color: var(--white);
}

.combined-rom-td {
  padding: 0.5rem;
  border: none;
  border-bottom: 1px solid var(--color-border);
  text-align: center;
  transition: background 150ms ease-in-out;
}

/* Vertical divider between Left and Right data columns */
.combined-rom-td.divider-left {
  border-left: 2px solid var(--color-border-strong);
}

/* Zebra striping applied to cells - odd rows (default white) */
.combined-rom-tbody .combined-rom-row:nth-child(odd) .combined-rom-td {
  background: var(--white);
}

/* Zebra striping applied to cells - even rows */
.combined-rom-tbody .combined-rom-row:nth-child(even) .combined-rom-td {
  background: var(--neutral-50);
}

/* Dark theme data cells - odd rows */
:root[data-theme='dark'] .combined-rom-tbody .combined-rom-row:nth-child(odd) .combined-rom-td {
  background: var(--neutral-850);
  border-bottom-color: var(--neutral-750);
}

/* Dark theme data cells - even rows */
:root[data-theme='dark'] .combined-rom-tbody .combined-rom-row:nth-child(even) .combined-rom-td {
  background: var(--neutral-875);
  border-bottom-color: var(--neutral-750);
}

/* Ensure borders are consistent inside Regional Assessment context where
   generic table rules remove borders. Increase specificity to win. */
.regional-assessment .combined-rom-table th.combined-rom-th,
.regional-assessment .combined-rom-table td.combined-rom-td {
  border: 1px solid var(--color-border);
}

.combined-rom-td.motion-cell {
  text-align: left;
  font-weight: 600;
  border-right: 3px solid var(--neutral-400);
  border-bottom: 1px solid var(--color-border);
  padding-left: 0.75rem;
  transition: background 150ms ease-in-out;
  /* Background inherits from row zebra striping by default */
}

/* Bottom-left corner rounding */
.combined-rom-tbody tr:last-child .combined-rom-td.motion-cell {
  border-bottom-left-radius: 4px !important;
}

/* Bottom-right corner rounding */
.combined-rom-tbody tr:last-child .combined-rom-td:last-child {
  border-bottom-right-radius: 4px !important;
}

/* Dark theme motion cell */
:root[data-theme='dark'] .combined-rom-td.motion-cell {
  color: var(--white);
  border-right: 3px solid var(--neutral-700);
  border-bottom-color: var(--neutral-750);
}

.combined-rom-td.normal-cell {
  color: var(--text-muted);
  font-size: 0.9rem;
}

.combined-rom-td.empty-cell {
  color: var(--text-muted);
  background: var(--surface-secondary);
  font-style: italic;
  opacity: 0.6;
}

.combined-rom-td.input-cell,
.combined-rom-td.select-cell {
  padding: 0.25rem;
  /* Transition inherited from .combined-rom-td */
}

/* Individual cell hover is overridden by row hover, so we can remove these */

/* Increase right padding on AROM/PROM cells to give the ° breathing room from the cell edge */
.combined-rom-td.input-cell {
  padding-right: 0.75rem;
}

/* Ensure RIM columns are wide enough to keep text on one line */
.combined-rom-td.select-cell,
.combined-rom-thead tr:nth-child(2) th:nth-child(3), /* Left RIM */
.combined-rom-thead tr:nth-child(2) th:nth-child(6)  /* Right RIM */ {
  min-width: 12rem;
}

/* Narrow AROM/PROM columns so they don't sprawl */
.combined-rom-thead tr:nth-child(2) th:nth-child(1), /* Left AROM */
.combined-rom-thead tr:nth-child(2) th:nth-child(2), /* Left PROM */
.combined-rom-thead tr:nth-child(2) th:nth-child(4), /* Right AROM */
.combined-rom-thead tr:nth-child(2) th:nth-child(5)  /* Right PROM */ {
  width: 7rem;
}
.combined-rom-tbody td:nth-child(2), /* Left AROM */
.combined-rom-tbody td:nth-child(3), /* Left PROM */
.combined-rom-tbody td:nth-child(5), /* Right AROM */
.combined-rom-tbody td:nth-child(6)  /* Right PROM */ {
  width: 7rem;
}

/* Input with suffix wrapper: right-justify contents */
.input-with-suffix {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 0.25rem; /* tighter spacing between input and ° */
  width: 100%;
}

/* Make the input blend into the cell (transparent bg/border) using data attributes */
input[data-component='combined-rom'][data-element='input'] {
  width: auto;
  min-width: 2.5rem;
  text-align: right;
  padding: 0.25rem 0 0.25rem 0.375rem;
  background: transparent;
  border: 0;
  box-shadow: none;
  border-bottom: 1px solid transparent;
  max-width: 8ch;
}

/* Focus: underline for accessibility */
input[data-component='combined-rom'][data-element='input']:focus-visible {
  outline: none;
  box-shadow: none;
  border: 0;
  border-bottom: 2px solid var(--und-green);
  background: transparent;
}

/* Subtle underline on hover without stealing focus */
input[data-component='combined-rom'][data-element='input']:hover {
  border: 0;
  border-bottom-color: var(--color-border);
  background: transparent;
}

/* Degree symbol pinned at the far right side of the cell */
.combined-rom-table .input-with-suffix .input-suffix {
  position: static;
  pointer-events: none;
  color: var(--text-muted);
  font-size: 0.9rem;
  font-weight: 500;
}

/* Hide placeholder if any remains */
input[data-component='combined-rom'][data-element='input']::placeholder {
  color: transparent;
}

/* Future-proof: hide number spinners if input type changes to number */
.combined-rom-table input[type='number']::-webkit-outer-spin-button,
.combined-rom-table input[type='number']::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.combined-rom-table input[type='number'] {
  -moz-appearance: textfield;
  appearance: textfield;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .combined-rom-th,
  .combined-rom-td {
    padding: 0.375rem 0.25rem;
    font-size: 0.85rem;
  }

  .combined-rom-th.sub-header {
    font-size: 0.8rem;
    padding: 0.375rem 0.125rem;
  }

  .input-with-suffix .combined-rom-input {
    max-width: 3.125rem;
    font-size: 0.85rem;
  }

  .combined-rom-select {
    font-size: 0.8rem;
  }

  /* Slightly reduce RIM column min-width on small screens; allow horizontal scroll if needed */
  .combined-rom-td.select-cell,
  .combined-rom-thead tr:nth-child(2) th:nth-child(3),
  .combined-rom-thead tr:nth-child(2) th:nth-child(6) {
    min-width: 10rem;
  }

  /* Also scale down AROM/PROM widths a bit on small screens */
  .combined-rom-thead tr:nth-child(2) th:nth-child(1),
  .combined-rom-thead tr:nth-child(2) th:nth-child(2),
  .combined-rom-thead tr:nth-child(2) th:nth-child(4),
  .combined-rom-thead tr:nth-child(2) th:nth-child(5),
  .combined-rom-tbody td:nth-child(2),
  .combined-rom-tbody td:nth-child(3),
  .combined-rom-tbody td:nth-child(5),
  .combined-rom-tbody td:nth-child(6) {
    width: 6rem;
  }
}
